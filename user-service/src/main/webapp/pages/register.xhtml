<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
      
<ui:composition template="/templates/layout-register.xhtml">
    <ui:define name="content">
        <h:form id="registerForm">
        	<p:messages id="messages" />
            <p:panel header="User Details">
                <h:panelGrid columns="2">
                	<h:panelGroup>
                			<p:outputLabel for="name" value="Name: " />
	                    	<p:inputText id="name" value="#{userController.saveUserRequest.name}" required="true" 
	                    		requiredMessage="You need to inform an name!" maxlength="100" size="50">
	                    	</p:inputText>
                	</h:panelGroup>
                	<h:message for="name" />
                	
           			<p:outputLabel value="Phones: "/>
           			<h:panelGroup id="phonesGroup">
           				<p:repeat var="phone" value="#{userController.saveUserRequest.phones}">
              				<p:outputLabel for="ddd" value="DDD: " /> 
                       		<p:inputText id="ddd" value="#{phone.ddd}" size="5" maxlength="5" />
                        	
                       		<p:outputLabel for="number" value="Number: " /> 
                       		<p:inputText id="number" value="#{phone.number}" size="10" maxlength="10" onchange="{phone.number}"/>
                        	
                       		<p:outputLabel for="phoneType" value="Type: " /> 
                       		<h:selectOneMenu id="phoneType" value="#{phone.type}" required="true" requiredMessage="You must select a option" > 
		                   		<f:selectItem itemValue="#{null}" 	itemLabel="Select" />
							   	<f:selectItem itemValue="P" 		itemLabel="Personal" />
							   	<f:selectItem itemValue="H" 		itemLabel="Home" />
							   	<f:selectItem itemValue="B" 		itemLabel="Business" />
							   	<f:selectItem itemValue="Other" 	itemLabel="Other" />
							</h:selectOneMenu>
                   		</p:repeat>
					</h:panelGroup>
               		<p:commandButton id="addPhone" icon="ui-icon-plus" value="add" action="#{userController.addPhone(phone)}" update="phonesGroup" process="@this" />
                	
               		<h:message for="ddd" /> 
                	<h:message for="number" />                	
                	<h:message for="phoneType" /> 
                	
                	<h:panelGroup>
                		<p:outputLabel for="email" value="Email: " />
                    	<p:inputText id="email" value="#{userController.saveUserRequest.email}" required="true" 
                    		requiredMessage="You need to inform an email!" maxlength="120" size="50" validatorMessage="Invalid email format" >
                    		 <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                   		</p:inputText>
                	</h:panelGroup>
                	<h:message for="email" />
                	
                	<h:panelGroup>
	                    <p:outputLabel for="emailConfirm" value="Email Confirm: " />
	                    <p:inputText id="emailConfirm" value="#{userController.saveUserRequest.emailConfirm}" required="true" 
	                    	requiredMessage="You need to confirm email!" maxlength="120" size="50" >
	                    	<f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
	                    </p:inputText>
                	</h:panelGroup>
                	<h:message for="emailConfirm" />
                    
                    <h:panelGroup rendered="#{userController.saveUserRequest.renderPassword}">
	                    <p:outputLabel for="password" value="Password: " />
	                    <p:password id="password" value="#{userController.saveUserRequest.password}" required="true" match="passwordConfirm"
	                    	requiredMessage="You need to inform an password!" validatorMessage="The passwords not match or is too short" maxlength="30" 
	                    	size="20" redisplay="false" rendered="#{userController.saveUserRequest.renderPassword}">
	                    	<f:validateLength minimum="6" maximum="30" />
	                    </p:password>
                	</h:panelGroup>
                	<h:message for="password" />
                	
                	<h:panelGroup rendered="#{userController.saveUserRequest.renderPassword}">
	                    <p:outputLabel for="passwordConfirm" value="Password Confirm: " />
	                    <p:password id="passwordConfirm" value="#{userController.saveUserRequest.passwordConfirm}" required="true" 
	                    	requiredMessage="You need to confirm password!" validatorMessage="The given password is too short" maxlength="30" 
	                    	size="20" redisplay="false" rendered="#{userController.saveUserRequest.renderPassword}">
	                    	<f:validateLength minimum="6" maximum="30" />
	                    </p:password>
                	</h:panelGroup>
                	<h:message for="passwordConfirm" />
                	                    
					<h:panelGroup>
     					<p:outputLabel for="dateOfBirth" value="Date of Birth: " />
                    	<p:inputMask id="dateOfBirth" value="#{userController.saveUserRequest.dateOfBirth}" mask="99/99/9999">
                    		<f:convertDateTime pattern="dd/MM/yyyy"/>
                   		</p:inputMask>
                	</h:panelGroup>                    	
                	<h:message for="dateOfBirth" />
                	
                	<h:panelGroup>
       					<p:outputLabel for="gender" value="Gender: " />
				      	<h:selectOneMenu id="gender" value="#{userController.saveUserRequest.gender}" required="true" requiredMessage="You must select a option">
				      		<f:selectItem itemValue="#{null}" 	itemLabel="Select" />
                   			<f:selectItem itemValue="F" 		itemLabel="F" />
						   	<f:selectItem itemValue="M" 		itemLabel="M" />
						   	<f:selectItem itemValue="Other" 	itemLabel="Other" />
						</h:selectOneMenu>
                       	</h:panelGroup>                    	
                	<h:message for="gender" />
                	
                	<h:panelGroup>
	                	<p:outputLabel for="maritalStatus" value="Marital Status: " />
				      	<h:selectOneMenu id="maritalStatus" value="#{userController.saveUserRequest.maritalStatus}" required="true" requiredMessage="You must select a option">
				      		<f:selectItem itemValue="#{null}" 		itemLabel="Select" />
                   			<f:selectItem itemValue="Not Married" 	itemLabel="Not Married" />
						   	<f:selectItem itemValue="Married" 		itemLabel="Married" />
						   	<f:selectItem itemValue="Divorced" 		itemLabel="Divorced" />
						   	<f:selectItem itemValue="Other" 		itemLabel="Other" />
						</h:selectOneMenu>
	               	</h:panelGroup>                    	
                	<h:message for="maritalStatus" />
                	
                	<h:panelGroup>
       					<p:outputLabel for="address" value="Address: " />
                    	<p:inputText id="address" value="#{userController.saveUserRequest.addressName}" required="true"
                    		requiredMessage="You must inform an address" maxlength="150" size="50" >
                   		</p:inputText>
                	</h:panelGroup>                    	
                	<h:message for="address" />
                	
                	<h:panelGroup>
       					<p:outputLabel for="addressComplement" value="Complement: " />
                    	<p:inputText id="addressComplement" value="#{userController.saveUserRequest.addressComplement}" 
                    		maxlength="150" size="50" >
                   		</p:inputText>
                	</h:panelGroup>                    	
                	<h:message for="addressComplement" />
                	
                	<h:panelGroup>
       					<p:outputLabel for="postalCode" value="Postal Code: " />
                    	<p:inputText id="postalCode" value="#{userController.saveUserRequest.addressPostalCode}" required="true"
                    		requiredMessage="You must inform an postal code" maxlength="50" size="20" >
                   		</p:inputText>
                	</h:panelGroup>                    	
                	<h:message for="postalCode" />
                	
                	<h:panelGroup>
       					<p:outputLabel for="neighborhood" value="Neighborhood: " />
                    	<p:inputText id="neighborhood" value="#{userController.saveUserRequest.neighborhoodName}" required="true"
                    		requiredMessage="You must inform an neighborhood" maxlength="50" size="20" >
                   		</p:inputText>
                	</h:panelGroup>                    	
                	<h:message for="neighborhood" />
                	
                	<h:panelGroup>
       					<p:outputLabel for="city" value="City: " />
                    	<p:inputText id="city" value="#{userController.saveUserRequest.cityName}" required="true"
                    		requiredMessage="You must inform an city" maxlength="50" size="20" >
                   		</p:inputText>
                	</h:panelGroup>                    	
                	<h:message for="city" />
                	
                	<h:panelGroup>
       					<p:outputLabel for="state" value="State: " />
                    	<p:inputText id="state" value="#{userController.saveUserRequest.stateName}" required="true"
                    		requiredMessage="You must inform an state" maxlength="50" size="20" >
                   		</p:inputText>
                	</h:panelGroup>                    	
                	<h:message for="state" />
                	
                	<h:panelGroup>
	                    <h:commandButton value="Save" action="#{userController.save}" />
	                    <h:commandButton value="Reset" type="reset" rendered="#{userController.saveUserRequest.renderReset}"/>
                	</h:panelGroup>
                </h:panelGrid>
            </p:panel>
        </h:form>
    </ui:define>
</ui:composition>
</html>